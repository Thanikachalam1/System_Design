Today we are going to design whatsApp one to one chatting feature.

Functionalities : 
    1. Should be scalable.
    2. Should handle millions of requests at a time.

Tech stack used : 
    1. Load Balancer - For distributing the traffic among the servers.
    2. Websocket - For realtime communication between database and user.
    3. Message Processor - This is backend logic we wrote which act as a intermediate between kafka and database
    4. Kafka - For queing the messages one by one and it ensures data is not lost.
    5. Redis - For checking whether the user is in online or not.

Process : 

    When user sends the message it , the session has been created since Websocket are statefull that means for every message it needs to hit
    the same server, not different servers because we need to remember which socket belongs to which user.

    After receiving the Websocket , the message is queued by kafka . It acts as a protective layer and it ensures that our data(message) is safe
    before reaching the message processor.

    Message processor gets the data from the kafka and store it in the database. 

    The above process is all about sending the data from user to database using Websocket.

    Using same instance of Websocket the user receives the message if he/she is in online.

    But here's the problem , knowing whether the user is online or not takes time when we check from the DB .So use Redis for checking the 
    online status of the user.

    



